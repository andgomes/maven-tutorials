<!DOCTYPE html>

<html>
    <head>
        <title>Copiando Arquivos de Recurso com o Plugin Resources</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    </head>
    <body>
        <h1>Copiando Arquivos de Recurso com o Plugin Resources</h1>
        
        <p>
        Quando programas precisam de uma quantidade muito grande de informação
        como entrada ou precisam acessar propriedades pré-definidas, é comum
        armazenarmos essas informações em arquivos separados. Esses arquivos
        são comumente chamados de recursos(resources).
        </p>
        
        <p>
        Na estrutura de projetos do Maven, há dois diretórios nos quais podemos
        armazenar os recursos, dependendo se são recursos das classes de
        produção ou das classes de teste.
        </p>
        
        <p>
        Os recursos das classes de produção devem ser salvos no diretório
        src/main/resources/. Da mesma forma, os recursos das classes de teste
        devem ser salvos no diretório src/test/resources/.
        </p>
        
        <p>
        Vamos criar um projeto e salvar um arquivo de recurso chamado
        resource.txt no diretório src/main/resources. A estrutura do projeto
        ficará como a estrutura abaixo.
        </p>
        
        <p>
        src/ <br />
        ----main/ <br />
        --------java/ <br />
        ------------com/ <br />
        ----------------andgomes/ <br />
        --------------------App.java <br />
        --------resources/ <br />
        ------------resource.txt <br />
        ----test/ <br />
        --------java/ <br />
        ------------com/ <br />
        ----------------andgomes/ <br />
        --------------------AppTest.java <br />
        pom.xml
        </p>
        
        <p>
        Agora vamos invocar a fase process-resources com o comando
        </p>
        
        <p>
        $ mvn process-resources
        </p>
        
        <p>
        Ao invocar a fase process-resources, o Maven utiliza o goal resources do
        plugin Resources para copiar os arquivos de recurso. O arquivo
        resource.txt é copiado para o diretório target/classes/, conforme a
        estrutura abaixo
        </p>
        
        <p>
        src/ <br />
        ----main/ <br />
        --------java/ <br />
        ------------com/ <br />
        ----------------andgomes/ <br />
        --------------------App.java <br />
        --------resources/ <br />
        ------------resource.txt <br />
        ----test/ <br />
        --------java/ <br />
        ------------com/ <br />
        ----------------andgomes/ <br />
        --------------------AppTest.java <br />
        target/ <br />
        ----classes/ <br />
        --------resource.txt <br />
        pom.xml
        </p>
        
        <p>
        Da mesma forma, podemos copiar os arquivos de recurso das classes de
        teste com o comando
        </p>
        
        <p>
        $ mvn process-test-resources
        </p>
        
        <p>
        O Maven utiliza o goal testResources do plugin Resources para copiar os
        arquivos de recurso para o diretório target/test-classes/.
        </p>
        
        <p>
        Perceba que não é tão útil ter somente os arquivos de recurso no
        diretório das classes. Ao invés de invocar a fase process-resources, o
        mais comum é invocar a fase compile, por que além de compilar o
        código-fonte, lembre-se que a fase process-resources já é invocada
        implicitamente pelo Maven no lifecycle default, ou seja, copiamos os
        recursos e compilamos o código com um único comando.
        </p>
        
        <p>
        Como exemplo, vamos criar o arquivo resource.txt e a classe que utiliza
        esse arquivo
        </p>
        
        <p>
        resource.txt
        </p>
        
        <p>
        Hello Resources!
        </p>
        
        <p>
        <a href="https://gist.github.com/andgomes/cc182a5f4d945e688358d121c7e9863d#file-resourcesdemo-java" target="_blank">
        ResourcesDemo.java
        </a>
        </p>
        
        <p>
        Vamos invocar a fase compile e em seguida executar a classe
        ResourceDemo com os comandos
        </p>
        
        <p>
        $ mvn compile
        </p>
        
        </p>
        $ mvn exec:java -Dexec.mainClass="com.andgomes.ResourcesDemo"
        </p>
        
        <p>
        O Maven imprimirá, no terminal, o seguinte resultado
        </p>
        
        <p>
        [INFO] --- exec-maven-plugin:1.5.0:java (default-cli) @ simple-project --- <br />
        Hello Resources! <br />
        [INFO] ------------------------------------------------------------------------
        </p>
    </body>
</html>
